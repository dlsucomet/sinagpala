import Head from 'next/head'
import Image from 'next/image'
import Link from 'next/link'
import { makeStyles } from '@mui/styles'
import Header from '../components/header'
import Footer from '../components/footer'
import NoSsr from '../components/NoSsr'
import data from './api/marikinaBounds/marikina_polygon_bounds.json'
import Button from '@mui/material/Button'
import Box from '@mui/material/Box'
import dynamic from 'next/dynamic'  
const LinePlot = dynamic(() => import("../components/line-plot"), {
  loading: () => "Loading...",
  ssr: false
});

const useStyles = makeStyles(theme => ({
  container: {
    padding: '0 2rem',
    backgroundImage: `linear-gradient(to bottom, ${theme.palette.yellow.secondary}, #FFFFFF)`
  },
  main: {
    minHeight: '90vh',
    padding: '4rem 0',
    flex: 1,
    display: 'flex',
    flexDirection: 'column',
    justifyContent: 'center',
    alignItems: 'center',
  },
  title: {
    margin: 0,
    lineHeight: 1.15,
    fontSize: '4rem',
    letterSpacing: '8px',
    display: 'flex',
    alignItems: 'center',
    textAlign: 'center',
  },
  description: {
    margin: '4rem 0',
    lineHeight: 1.5,
    fontSize: '1.5rem',
    textAlign: 'center',
  },
  logo: {
    verticalAlign: 'middle',
  },
  centerText: {
    textAlign: 'center',
  },
  dataRow: { //one row in the card
    display: 'flex',
    justifyContent: 'space-around',
    flexWrap: 'wrap',
    alignItems: 'center',
    width: '70%',
  },
  dataColumn: {
    display: 'flex',
    justifyContent: 'center',
    textAlign: 'center',
    padding: '1rem'
  },
  infoBlock: {
    fontSize: '30px',
  },
  dataBlock: {
    fontSize: '60px',
    color: theme.palette.orange.main,
    fontWeight: 'bold',
  },
  imgBound: {
    margin: '100px'
  }
}));

export default function Home({ data }) {
  const classes = useStyles();
  const marikina_data = data.properties;
  console.log(marikina_data)
  return (
    <NoSsr>
      <div className={classes.container}>
        <Head>
          <title>Sinagpala</title>
          <meta name="description" content="Generated by create next app" />
          <link rel="icon" type="image/png" 
          href="../public/logo.svg" />
          <link
              rel="preload"
              href="/fonts/Ropa_Sans/RopaSans-Regular.ttf"
              as="font"
              crossOrigin=""
            />
        </Head>
        <Header />

        <main className={classes.main}>
          <h1 className={classes.title} >
            <Image src="/Logo.svg" alt="Sinagpala Logo" width={150} height={150} className={classes.logo}/>
            Sinagpala
          </h1>

          <p className={classes.description}>
          Have your rooftops checked for its solar energy potential.
          </p>

          <Button variant="outlined">
            <Link href="/explore">
                <a href="https://nextjs.org/docs" >
                    <p>Explore Marikina Area</p>
                </a>
            </Link>
          </Button>

          <div style={{fontSize: '30px'}}>
            <h1 className={classes.centerText}>Did You Know?</h1>
          </div>

          <Box
              className={classes.dataRow}
          >
            <Image src="/marikina_bounds.png" alt="Sinagpala Logo" width={550} height={550} className={classes.imgBound}/>
            <div className={classes.dataColumn}>
              <div className={classes.infoBlock}> 
                Marikina has an estimated {<br />}
                potential of having {<br />} 
                <span className={classes.dataBlock}>
                  {marikina_data['total_kwh']}
                </span> kWh {<br />}
                of solar energy
              </div>
            </div>
          </Box>

          <LinePlot data={{properties:marikina_data}} type="hour" />
        </main>

        {/* <Footer /> */}
      </div>
    </NoSsr>
  )
}

export async function getStaticProps(){
  return {
    props: {
      data: data.features[0],
    },
  }
}

